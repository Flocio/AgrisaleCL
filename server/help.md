# AgrisaleCL 帮助文档

欢迎使用 AgrisaleCL 农资管理系统！本帮助文档将指导您如何使用系统的各项功能。

---

## 目录

1. [快速开始](#快速开始)
2. [基础功能](#基础功能)
3. [数据管理](#数据管理)
4. [报表统计](#报表统计)
5. [系统设置](#系统设置)
6. [常见问题](#常见问题)

---

## 快速开始

### 首次使用

1. **注册账号**
   - 打开应用后，点击"注册"按钮
   - 输入用户名和密码（密码至少3个字符）
   - 确认密码后点击"注册"
   - 注册成功后会自动登录

2. **登录系统**
   - 如果已有账号，输入用户名和密码点击"登录"
   - 系统会自动尝试连接服务器（支持多个地址自动切换）
   - 登录成功后进入主界面

3. **配置服务器地址**（可选）
   - 如果自动连接失败，可以进入"系统工具" → "服务器配置"
   - 修改服务器地址或使用快速配置（HTTPS/局域网）
   - 点击"测试连接"验证地址是否可用
   - 保存配置后重新登录

### 主界面介绍

主界面分为三个页面，通过底部导航栏切换：

- **第一页（基础功能）**：日常业务操作
- **第二页（报告统计）**：数据统计和分析
- **第三页（系统工具）**：系统设置和工具

---

## 基础功能

### 产品管理

**功能位置**：基础功能 → 产品

**主要功能**：
- **添加产品**：点击右上角"+"按钮，输入产品名称、描述、初始库存、单位、供应商
- **编辑产品**：点击产品列表中的产品，修改信息
- **删除产品**：长按产品或点击删除按钮（需先显示删除按钮）
- **搜索产品**：在搜索框输入产品名称或描述
- **筛选产品**：按供应商筛选产品

**注意事项**：
- 同一用户下产品名称不能重复
- 产品库存会在采购、销售、退货时自动更新
- 删除产品前请确保没有相关的采购、销售、退货记录

### 采购管理

**功能位置**：基础功能 → 采购

**主要功能**：
- **添加采购**：选择产品、供应商，输入数量、单价、日期
- **编辑采购**：修改采购记录，系统会自动计算库存变化
- **删除采购**：删除采购记录，系统会自动恢复库存
- **筛选采购**：按日期范围、产品、供应商筛选

**注意事项**：
- 采购数量为正数时，库存增加
- 采购数量为负数时，表示采购退货，库存减少（需确保库存足够）
- 采购时会自动更新产品库存

### 销售管理

**功能位置**：基础功能 → 销售

**主要功能**：
- **添加销售**：选择产品、客户，输入数量、单价、日期
- **编辑销售**：修改销售记录，系统会自动计算库存变化
- **删除销售**：删除销售记录，系统会自动恢复库存
- **筛选销售**：按日期范围、产品、客户筛选

**注意事项**：
- 销售前系统会检查库存是否充足
- 库存不足时无法完成销售，请先补充库存
- 销售时会自动减少产品库存

### 退货管理

**功能位置**：基础功能 → 退货

**主要功能**：
- **添加退货**：选择产品、客户，输入数量、单价、日期
- **编辑退货**：修改退货记录
- **删除退货**：删除退货记录
- **筛选退货**：按日期范围、产品、客户筛选

**注意事项**：
- 退货时会自动增加产品库存
- 退货记录用于记录客户退货情况

### 进账管理

**功能位置**：基础功能 → 进账

**主要功能**：
- **添加进账**：选择客户，输入实际进账金额、优惠金额（或优惠前价格）、日期、经手人、支付方式
- **编辑进账**：修改进账记录
- **删除进账**：删除进账记录
- **筛选进账**：按日期范围、客户、经手人筛选

**注意事项**：
- 实际进账金额 + 优惠金额 = 优惠前价格
- 可以只输入实际进账金额和优惠金额，系统自动计算优惠前价格
- 也可以只输入实际进账金额和优惠前价格，系统自动计算优惠金额
- 优惠前价格必须大于等于实际进账金额

### 汇款管理

**功能位置**：基础功能 → 汇款

**主要功能**：
- **添加汇款**：选择供应商，输入金额、日期、经手人、支付方式
- **编辑汇款**：修改汇款记录
- **删除汇款**：删除汇款记录
- **筛选汇款**：按日期范围、供应商、经手人筛选

**注意事项**：
- 汇款记录用于记录向供应商的付款情况
- 金额必须大于0

### 客户管理

**功能位置**：基础功能 → 客户

**主要功能**：
- **添加客户**：输入客户名称和备注
- **编辑客户**：修改客户信息
- **删除客户**：删除客户（需确保没有相关销售、退货、进账记录）
- **搜索客户**：在搜索框输入客户名称

### 供应商管理

**功能位置**：基础功能 → 供应商

**主要功能**：
- **添加供应商**：输入供应商名称和备注
- **编辑供应商**：修改供应商信息
- **删除供应商**：删除供应商（需确保没有相关采购、汇款记录）
- **搜索供应商**：在搜索框输入供应商名称

### 员工管理

**功能位置**：基础功能 → 员工

**主要功能**：
- **添加员工**：输入员工名称和备注
- **编辑员工**：修改员工信息
- **删除员工**：删除员工（需确保没有相关进账、汇款记录）
- **搜索员工**：在搜索框输入员工名称

**用途**：
- 员工用于记录进账和汇款的经手人

---

## 数据管理

### 数据导出

**功能位置**：各报表界面 → 导出按钮

**支持格式**：
- **CSV 格式**：标准 CSV 文件，可用 Excel 打开
- **PDF 格式**：格式化的 PDF 表格，适合打印和分享

**导出选项**：
- **保存到本地**：选择保存位置，可以修改文件名
- **分享给其他应用**：通过系统分享功能发送给其他应用

**注意事项**：
- 导出数据包含当前筛选条件下的所有数据
- PDF 导出完美支持中文字符
- 导出文件名包含时间戳，避免覆盖

### 数据备份

**功能位置**：系统工具 → 数据备份

**自动备份**：
- **启用自动备份**：开启后系统会定时自动备份数据
- **备份间隔**：可选择 5 分钟、15 分钟、30 分钟、1 小时、6 小时、12 小时、24 小时
- **最大保留数量**：设置最多保留多少个备份文件（1-50 个）
- **自动清理**：超过最大数量的旧备份会自动删除

**手动备份**：
- 点击"立即备份"按钮手动创建备份

**备份恢复**：
- 进入"备份列表"界面
- 选择要恢复的备份文件
- 确认后恢复数据（会覆盖当前数据）

**注意事项**：
- 备份文件保存在平台特定的目录中
- 建议定期检查备份文件是否正常
- 恢复数据前请确保当前数据已备份

---

## 报表统计

### 库存报告

**功能位置**：报告统计 → 库存

**功能说明**：
- 显示所有产品的当前库存情况
- 支持搜索和筛选
- 可导出 CSV/PDF

### 采购报告

**功能位置**：报告统计 → 采购

**功能说明**：
- 按日期范围统计采购记录
- 支持按产品、供应商筛选
- 显示采购总额
- 可导出 CSV/PDF

### 销售报告

**功能位置**：报告统计 → 销售

**功能说明**：
- 按日期范围统计销售记录
- 支持按产品、客户筛选
- 显示销售总额
- 可导出 CSV/PDF

### 退货报告

**功能位置**：报告统计 → 退货

**功能说明**：
- 按日期范围统计退货记录
- 支持按产品、客户筛选
- 显示退货总额
- 可导出 CSV/PDF

### 销售汇总

**功能位置**：报告统计 → 销售汇总

**功能说明**：
- 综合销售数据统计
- 支持日期范围筛选
- 可导出 CSV/PDF

### 销售与进账分析

**功能位置**：报告统计 → 销售与进账

**功能说明**：
- 对比销售记录和进账记录
- 分析收款情况
- 可导出 CSV/PDF

### 采购与汇款分析

**功能位置**：报告统计 → 采购与汇款

**功能说明**：
- 对比采购记录和汇款记录
- 分析付款情况
- 可导出 CSV/PDF

### 财务统计

**功能位置**：报告统计 → 财务统计

**功能说明**：
- 综合财务数据分析
- 收入、支出、利润统计
- 可导出 CSV/PDF

---

## 系统设置

### 账户设置

**功能位置**：系统工具 → 账户设置

**主要功能**：
- **修改密码**：输入当前密码和新密码，确认后修改
- **退出登录**：退出当前账号，返回登录界面

### 服务器配置

**功能位置**：系统工具 → 服务器配置

**主要功能**：
- **查看当前服务器地址**：显示当前连接的服务器地址
- **修改服务器地址**：输入新的服务器地址
- **测试连接**：测试服务器地址是否可用（显示连接耗时）
- **快速配置**：
  - **HTTPS**：使用 HTTPS 内网穿透地址（不可修改）
  - **局域网**：使用局域网地址（可修改）
- **保存配置**：保存修改后的服务器地址

**注意事项**：
- 系统会自动尝试多个服务器地址（配置地址 → HTTPS → 局域网）
- 成功连接的地址会自动保存
- 如果自动连接失败，可以手动配置服务器地址

### 数据备份设置

**功能位置**：系统工具 → 数据备份

**主要功能**：
- 配置自动备份间隔
- 设置最大备份保留数量
- 查看备份列表
- 手动备份和恢复

### 关于系统

**功能位置**：系统工具 → 关于系统

**主要功能**：
- 查看当前版本信息
- 检查更新
- 查看系统信息
- **查看帮助**：打开本帮助文档

---

## 常见问题

### 1. 无法连接到服务器

**可能原因**：
- 服务器地址配置错误
- 网络连接问题
- 服务器未启动

**解决方法**：
1. 检查网络连接是否正常
2. 进入"服务器配置"界面，测试连接
3. 尝试使用快速配置中的 HTTPS 或局域网地址
4. 确认服务器是否正常运行

### 2. 库存显示不正确

**可能原因**：
- 有未完成的采购、销售、退货操作
- 数据同步问题

**解决方法**：
1. 检查是否有未保存的操作
2. 刷新产品列表
3. 检查相关的采购、销售、退货记录

### 3. 无法销售，提示库存不足

**可能原因**：
- 产品库存确实不足
- 库存被其他操作占用

**解决方法**：
1. 检查产品当前库存
2. 先进行采购补充库存
3. 如果库存显示正常但仍无法销售，请刷新数据后重试

### 4. 导出文件无法打开

**可能原因**：
- 文件格式不匹配
- 文件损坏

**解决方法**：
1. CSV 文件使用 Excel 或文本编辑器打开
2. PDF 文件使用 PDF 阅读器打开
3. 如果文件损坏，重新导出

### 5. 自动备份不工作

**可能原因**：
- 自动备份未启用
- 备份间隔设置过长
- 用户未登录

**解决方法**：
1. 检查"数据备份"设置中是否启用了自动备份
2. 检查备份间隔设置
3. 确保已登录账号
4. 查看"最后备份时间"确认备份是否执行

### 6. 忘记密码

**解决方法**：
- 目前系统不支持密码找回功能
- 请联系系统管理员重置密码
- 或使用其他账号登录

### 7. 数据丢失

**解决方法**：
1. 检查"数据备份"中的备份文件
2. 如果有备份，可以恢复数据
3. 如果没有备份，数据可能无法恢复
4. 建议定期检查自动备份是否正常工作

### 8. 多设备同时使用

**说明**：
- 系统支持多设备同时登录同一账号
- 数据实时同步
- 如果出现数据冲突，系统会提示刷新数据

---

## 使用技巧

### 1. 快速搜索

- 大部分列表界面都支持搜索功能
- 输入关键词即可快速筛选数据
- 支持产品名称、客户名称、供应商名称等搜索

### 2. 日期筛选

- 报表界面支持日期范围筛选
- 点击日期选择器选择开始和结束日期
- 可以快速查看特定时间段的数据

### 3. 数据导出

- 导出前可以先筛选数据，只导出需要的数据
- CSV 格式适合在 Excel 中进一步分析
- PDF 格式适合打印和分享

### 4. 定期备份

- 建议启用自动备份功能
- 设置合适的备份间隔（建议 15 分钟或 30 分钟）
- 定期检查备份文件是否正常

### 5. 服务器配置

- 如果经常使用局域网，可以配置局域网地址
- 系统会自动尝试多个地址，确保连接可用
- 成功连接的地址会自动保存

---

## 联系支持

如果您在使用过程中遇到问题，可以：

1. 查看本帮助文档
2. 检查系统版本是否为最新版本
3. 查看"关于系统"中的系统信息
4. 联系系统管理员

---

**祝您使用愉快！**

*最后更新：2025年*
*系统版本：v1.6.0*
